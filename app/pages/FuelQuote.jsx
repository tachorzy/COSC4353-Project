import Head from 'next/head'
import Image from 'next/image'
import { useState } from 'react'
import { useRouter } from 'next/router'
import FuelQuoteForm from '../components/FuelQuoteForm.jsx'
import { Inter } from '@next/font/google'
import { Combo, Roboto, Rubik } from '@next/font/google'
import styles from '@/styles/Home.module.css'
import localFont from '@next/font/local'
import FuelQuoteStyle from '../styles/FuelQuoteStyle.module.css'
import FuelQuoteHistory from '../components/FuelQuoteHistory.jsx'

const inter = Inter({ subsets: ['latin'] })

const roboto = Roboto({ 
  subsets: ['latin'], 
  weight: '400' 
})

const satoshi = localFont({
  src: '../fonts/Satoshi-Regular.otf',
  weight: '200'
})



export default function FuelQuote() {
  var locationFactor = 0.04
  var rateHistory = .01
  var requestFactor = .03
  var CPF = .1
  // Some checks to change the first 3 variables go below here

  // Actual calculation
  var gallonsRequested
  const PPG = 1.5
  const fuelMultiplier = locationFactor - rateHistory + requestFactor + CPF
  const totPrice = (fuelMultiplier + PPG) * gallonsRequested 
  const [selectDate, setSelectedDate] = useState('')
  const [selectGallons, setSelectedGallons] = useState('')

  const router = useRouter();

  const handleFormSubmit = async (event) => {
    event.preventDefault();

    if (selectDate === "mm/dd/yyy" || selectGallons === "")
      return;

    try{
      router.push({
        pathname: '/api/calculate', //rename this to whatever actual api endpoint we'll end up having
        query: { date: selectDate, numOfGallons: selectGallons }, 
      })
    } catch(error){
      console.error(error)
    }
  };

  return (
    <>
      <Head>
        <title>Fill Your Fuel Quote Form</title>
        <meta name="description" content="Generated by create next app"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="icon" href="/favicon.ico"/>
      </Head>
      <main className={styles.main}>
        <div className={satoshi.className}>
            <form 
              className= "bg-stone-100 bg-opacity-20 grid grid-cols-2 grid-rows-2 gap-y-5 rounded-3xl m-auto pb-11 pt-10 px-5 text-sm" 
              onSubmit={handleFormSubmit}
            >
                <h2 className="text-stone-100 font-semibold col-span-2 text-3xl text-center">The Current rate is <b>{PPG}</b></h2>

                <input type="date" className="h-12 mx-5 w-10/12 p-2 py-2 border-transparent rounded-xl font-medium text-stone-400" placeholder={"Delivery Date"} name="delivery-date" onChange={(event) => setSelectedDate(event.target.value)}/>

                <div className="w-full">
                  <Image src='/gallon.svg' width={18} height={18} className="absolute ml-40 mt-3.5" alt="gallon"></Image>
                  <input className="h-12 mx-5 w-10/12 p-2 py-2 border-transparent rounded-xl font-medium text-stone-400" placeholder={"Gallons"} name="gallons-requested" onChange={(event) => setSelectedGallons(event.target.value)}/>
                </div>

                <div className="w-full col-span-2">
                  <div className="h-12 mx-5 w-11/12 p-2 py-2 border-transparent rounded-xl font-medium bg-stone-100 text-stone-400">
                    
                  </div>
                </div>

                <buttton 
                  className="bg-stone-300 text-neutral-500 text-center col-span-1 font-semibold h-12 mt-2 mx-5 w-10/12 p-2 py-3 border-transparent rounded-xl hover:bg-stone-400 hover:text-stone-600 hover:cursor-pointer flex flex-row items-center justify-center"
                >
                  Calculate Your Quote!
                </buttton>  
                
                <buttton 
                  className="bg-stone-300 text-neutral-500 text-center col-span-1 font-semibold h-12 mt-2 mx-5 w-10/12 p-2 py-3 border-transparent rounded-xl hover:bg-stone-400 hover:text-stone-600 hover:cursor-pointer flex flex-row items-center justify-center gap-x-1"
                >
                  {"Submit"}
                  <Image src="/link.svg" width={18} height={18} alt=""></Image>
                </buttton> 
                {/* <div className={FuelQuoteStyle.inputContainer}>
                  <div className="flex flex-row">
                    <buttton className={FuelQuoteStyle.calculateButton}>Calculate Your Quote!</buttton>  
                    <buttton className={FuelQuoteStyle.calculateButton}>
                      {"Submit"}
                      <Image src="/link.svg" width={28} height={28} alt=""></Image>
                    </buttton> 
                  </div>
                </div> */}
            </form>
          </div>
      </main>
    </>
  )
}
