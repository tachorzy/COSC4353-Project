import Head from 'next/head'
import Image from 'next/image'
import { useState } from 'react'
import { useRouter } from 'next/router'
import FuelQuoteForm from '../components/FuelQuoteForm.jsx'
import { Inter } from '@next/font/google'
import { Combo, Roboto, Rubik } from '@next/font/google'
import styles from '@/styles/Home.module.css'
import localFont from '@next/font/local'
import FuelQuoteStyle from '../styles/FuelQuoteStyle.module.css'
import FuelQuoteHistory from '../components/FuelQuoteHistory.jsx'

const inter = Inter({ subsets: ['latin'] })

const roboto = Roboto({ 
  subsets: ['latin'], 
  weight: '400' 
})

const satoshi = localFont({
  src: '../fonts/Satoshi-Regular.otf',
  weight: '200'
})



export default function FuelQuote() {
  const pricePerGallon = 2.958

  const [selectDate, setSelectedDate] = useState('')
  const [selectGallons, setSelectedGallons] = useState('')

  const router = useRouter();

  const handleFormSubmit = async (event) => {
    event.preventDefault();

    if (selectDate === "mm/dd/yyy" || selectGallons === "")
      return;

    try{
      router.push({
        pathname: '/api/calculate', //rename this to whatever actual api endpoint we'll end up having
        query: { date: selectDate, numOfGallons: selectGallons }, 
      })
    } catch(error){
      console.error(error)
    }
  };

  return (
    <>
      <Head>
        <title>Quotr</title>
        <meta name="description" content="Generated by create next app"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="icon" href="/favicon.ico"/>
      </Head>
      <main className={styles.main}>
        <div className={satoshi.className}>
            <form className={FuelQuoteStyle.container} onSubmit={handleFormSubmit}>
                <h2 className=" text-stone-700 font-semibold col-span-2 text-3xl text-center">The Current rate is <b>{pricePerGallon}</b></h2>

                <div className={FuelQuoteStyle.inputContainer}>
                    <div className={FuelQuoteStyle.logoInputContainer}>
                        <input type="date" className={FuelQuoteStyle.standardInputBox} placeholder={"Delivery Date"} name="delivery-date" onChange={(event) => setSelectedDate(event.target.value)}/>
                    </div>
                </div>
                <div className={FuelQuoteStyle.splitContainer}>
                    <div className={FuelQuoteStyle.logoInputContainer}>
                        <input className={FuelQuoteStyle.standardInputBox} placeholder={"Gallons"} name="gallons-requested" onChange={(event) => setSelectedGallons(event.target.value)}/>
                        <Image src='/gallon.svg' width={28} height={28} className={FuelQuoteStyle.gallonLogo} alt="gallon"></Image>
                    </div>
                </div>
                <buttton className={FuelQuoteStyle.calculateButton}>Calculate Your Quote!</buttton>  
            </form>
          </div>
      </main>
    </>
  )
}
